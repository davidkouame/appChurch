description = "Saint Mathieu Layout" ==
<!DOCTYPE html>
<html lang="en">

<head>

	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="description" content="">
	<meta name="author" content="">

	<title>Saint Mathieu</title>

	<!-- Font Awesome Icons -->
	<!--        <link href="{{ 'vendor/fontawesome-free/css/all.min.css'|theme }}" rel="stylesheet" type="text/css">-->

	<!-- Google Fonts -->
	<link href="https://fonts.googleapis.com/css?family=Merriweather+Sans:400,700" rel="stylesheet">
	<link href='https://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic'
		rel='stylesheet' type='text/css'>

	<!-- Plugin CSS -->
	<!--        <link href="{{ 'assets/vendor/magnific-popup/magnific-popup.css'|theme }}" rel="stylesheet">-->

	<!-- Theme CSS - Includes Bootstrap -->

	<!--        <link href="{{ 'assets/css/bootstrap.min.css'|theme }}" rel="stylesheet">-->
	{% partial 'site/meta' %}
	<!--        <link rel="stylesheet" href="{{ 'assets/css/bootstrap.min.css'| theme}}" >-->

	<link href="{{ 'assets/css/creative.min.css'|theme }}" rel="stylesheet">

	<link href="{{ 'assets/node_modules/bootstrap-datepicker/dist/css/bootstrap-datepicker.css'|theme }}"
		rel="stylesheet">

	<style type="text/css">
		button.navbar-toggler.navbar-toggler {
			display: none;
		}
	</style>

</head>

<body id="page-top">

	<div style="max-width: 1403px; margin: 0 auto">
		<!-- Header -->
		{% partial 'site/headernavbar' %}

		<!-- Content -->
		<section class="page-section" id="contact" style="padding-bottom: 60px;">{% page %}</section>

		<!-- Footer -->
		<footer class="bg-light py-5"> {% partial 'site/footer' %} </footer>
	</div>

	<!-- Scripts -->
	{% partial 'site/scriptsnavabar' %}

	<div class="modal fade" id="createDiplomeModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
		aria-hidden="true">
		<div class="modal-dialog" role="document">
			<form class="modal-content" data-request="onCheckValiationCreateDiplome" data-request-files
				data-request-flash accept-charset="UTF8" data-request-success="afterSaveDiplome()">
				<div class="modal-header">
					<h5 class="modal-title">Ajouter un diplôme</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<div>
						<div class="form-group">
							<label for="recipient-name" class="col-form-label">Libellé <span class="required">*</span>
							</label>
							<!-- <input type="text" name="libelle" class="form-control" id="libelleDiplome"> -->
							<select class="form-control" name="libelle" id="libelleDiplome">
								<option value="">Sélectionner un diplôme</option>
								{% for diplome in diplomes %}
								<option value="{{ diplome.id }}">{{ diplome.denomination }}</option>
								{% endfor %}
								<!-- <option value="autre">Autre</option> -->
							</select>
							<!-- <input type="text" name="libelle" class="form-control" id="inputAutreDiplome" 
							placeholder="Autre" style="margin-top: 14px;display: none"> -->
						</div>
						<div class="form-group">
							<label for="message-text" class="col-form-label">Date
								début <span class="required">*</span></label>
							<div class="input-group date" data-provide="datepicker">
								<input type="text" class="form-control datepicker" name="date_debut"
									data-date-format="yyyy/mm/dd" id="dateDebutDiplome">
								<div class="input-group-addon">
									<span class="glyphicon glyphicon-th"></span>
								</div>
							</div>
							<!-- 								<input type="date" name="date_debut" class="form-control" -->
							<!-- 								id="dateDebutDiplome"> -->
						</div>
						<div class="form-group">
							<label for="message-text" class="col-form-label">Date
								fin <span class="required">*</span></label>
							<div class="input-group date" data-provide="datepicker">
								<input type="text" class="form-control datepicker" name="date_fin"
									data-date-format="yyyy/mm/dd" id="dateFinDiplome">
								<div class="input-group-addon">
									<span class="glyphicon glyphicon-th"></span>
								</div>
							</div>
							<!-- <input type="date" name="date_fin" class="form-control"
								id="dateFinDiplome"> -->
						</div>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-dismiss="modal">Annuler</button>
					<button type="submit" class="btn btn-primary" id="saveDiplomssse">Ajouter</button>
				</div>
			</form>
		</div>
	</div>

	<div class="modal fade" id="createExperienceModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
		aria-hidden="true">
		<div class="modal-dialog" role="document">
			<form class="modal-content" data-request="onCheckValiationCreateDiplome" data-request-files
				data-request-flash accept-charset="UTF8" data-request-success="afterSaveExperience()">
				<div class="modal-header">
					<h5 class="modal-title">Ajouter une expérience professionnelle</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<div action="">
						<div class="form-group">
							<label for="recipient-name" class="col-form-label">Libellé <span
									class="required">*</span></label>
							<input type="text" name="libelle" class="form-control" id="libelleExperience">
						</div>
						<div class="form-group">
							<label for="message-text" class="col-form-label">Date
								début <span class="required">*</span></label>
							<div class="input-group date" data-provide="datepicker">
								<input type="text" class="form-control datepicker" name="date_debut"
									data-date-format="yyyy/mm/dd" id="dateDebutExperience">
								<div class="input-group-addon">
									<span class="glyphicon glyphicon-th"></span>
								</div>
							</div>
							<!-- <input type="date" name="date_debut" class="form-control"
								id="dateDebutExperience"> -->
						</div>
						<div class="form-group">
							<label for="message-text" class="col-form-label">Date
								fin <span class="required">*</span></label>
							<div class="input-group date" data-provide="datepicker">
								<input type="text" class="form-control datepicker" name="date_fin"
									data-date-format="yyyy/mm/dd" id="dateFinExperience">
								<div class="input-group-addon">
									<span class="glyphicon glyphicon-th"></span>
								</div>
							</div>
							<!-- <input type="date" name="date_fin" class="form-control"
								id="dateFinExperience"> -->
						</div>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-dismiss="modal">Annuler</button>
					<button type="submit" class="btn btn-primary">Ajouter</button>
				</div>
			</form>
		</div>
	</div>

	<script type="text/javascript">

		outAfterSaveDiplome = null;
		outAfterSaveExperience = null;
		var test = "salut les gars";

		function afterSaveDiplome() {
			outAfterSaveDiplome();
		}

		function afterSaveExperience() {
			outAfterSaveExperience();
		}

		$(function () {

			//////////////////////////////////////////////////////////////////
			//===========================Event=============================//

			$("html").removeAttr("font-size");
			var $j = jQuery.noConflict();
			var lengthTrExperience = 1;
			var lengthTrDiplome = 1;
			var dataTable = null;
			// $j('.datepicker').datepicker({dateFormat: 'yyyy-mm-dd'});

			$("#openModalCreateDiplome").click(function () {
				$("#createDiplomeModal").modal();
			});

			$('#createDiplomeModal').on('hidden.bs.modal', function () {
				$("#libelleDiplome").val("");
				$("#dateDebutDiplome").val("");
				$("#dateFinDiplome").val("");
			});

			$("#openModalCreateExperience").click(function () {
				$("#createExperienceModal").modal();
			});

			$('#createExperienceModal').on('hidden.bs.modal', function () {
				$("#libelleExperience").val("");
				$("#dateDebutExperience").val("");
				$("#dateFinExperience").val("");
			});

			$("#saveDiplome").click(function () {
				addDiplome();
			});

			$("#saveExperience").click(function () {
				addExperience();
			});

			$(document).on("click", ".supprimerDiplome", function () {
				$(this).parent().parent().remove();
			});

			$(document).on("click", ".supprimerExperience", function () {
				$(this).parent().parent().remove();
			});

			$("#saveParoissien").submit(function () {
				let countDiplome = 0;
				let countExperience = 0;
				$(".dataDiplome").each(function (e) {
					let dataDiplome = $(this);
					let libelleDiplome = dataDiplome
						.find('.libelleDiplome')
						.data('libellediplome');
					let dateDebutDiplome = dataDiplome
						.find('.dateDebutDiplome')
						.data('datedebutdiplome');
					let dateFinDiplome = dataDiplome
						.find('.dateFinDiplome')
						.data('datefindiplome');
					let content = '<input type="text" name="diplomes[' + countDiplome + '][libelle]" value="' + libelleDiplome + '" hidden>';
					content += '<input type="text" name="diplomes[' + countDiplome + '][date_debut]" value="' + dateDebutDiplome + '" hidden>';
					content += '<input type="text" name="diplomes[' + countDiplome + '][date_fin]" value="' + dateFinDiplome + '" hidden>';
					countDiplome += 1;
					$("#saveParoissien").append(content);
				});

				$(".dataExperience").each(function (e) {
					let dataExperience = $(this);
					let libelleExperience = dataExperience
						.find('.libelleExperience')
						.data('libelleexperience');
					let dateDebutExperience = dataExperience
						.find('.dateDebutExperience')
						.data('datedebutexperience');
					let dateFinExperience = dataExperience
						.find('.dateFinExperience')
						.data('datefinexperience');
					let content = '<input type="text" name="experiences[' + countExperience + '][libelle]" value="' + libelleExperience + '" hidden>';
					content += '<input type="text" name="experiences[' + countExperience + '][date_debut]" value="' + dateDebutExperience + '" hidden>';
					content += '<input type="text" name="experiences[' + countExperience + '][date_fin]" value="' + dateFinExperience + '" hidden>';
					countExperience += 1;
					$("#saveParoissien").append(content);
				});
				return true;
			});

			/*$("#selectDiplome").change(function(e){
				if($(this).val() == "autre"){
					$("#inputAutreDiplome").show();
				}else{
					$("#inputAutreDiplome").hide();
				}
			});*/

			//////////////////////////////////////////////////////////////////
			//===========================Function===========================//

			function addDiplome() {
				if (lengthTrDiplome == 1) {
					$("#firstTrDiplome").empty();
				}
				let tdlibelleDiplome = '<td class="libelleDiplome" data-libellediplome="'
					+ $("#libelleDiplome").val() + '">' + $("#libelleDiplome option:selected").text() + '</td>';
				let tdDateDebutDiplome = '<td class="dateDebutDiplome" data-datedebutdiplome="'
					+ $("#dateDebutDiplome").val() + '">' + $("#dateDebutDiplome").val() + '</td>';
				let tdDateFinDiplome = '<td class="dateFinDiplome" data-datefindiplome="'
					+ $("#dateFinDiplome").val() + '">'
					+ $("#dateFinDiplome").val() + '</td>';
				var content = '<tr scope="row" class="dataDiplome" data-diplome_id="' + lengthTrDiplome + '">'
					+ tdlibelleDiplome + tdDateDebutDiplome + tdDateFinDiplome +
					'<td><a class="btn btn-danger supprimerDiplome" style="cursor: pointer;color: #fff;">supprimer</a></td></tr>';
				$("#tableDiplome tbody").append(content);
				lengthTrDiplome += 1;
				$("#createDiplomeModal").modal('toggle');
			}

			function addExperience() {
				if (lengthTrExperience == 1) {
					$("#firstTrExperience").empty();
				}
				let tdlibelleExperience = '<td class="libelleExperience" data-libelleexperience="'
					+ $("#libelleExperience").val() + '">'
					+ $("#libelleExperience").val() + '</td>';
				let tdDateDebutExperience = '<td class="dateDebutExperience" data-datedebutexperience="'
					+ $("#dateDebutExperience").val() + '">'
					+ $("#dateDebutExperience").val() + '</td>';
				let tdDateFinExperience = '<td class="dateFinExperience" data-datefinexperience="'
					+ $("#dateFinExperience").val() + '">'
					+ $("#dateFinExperience").val() + '</td>';
				var content = '<tr scope="row" class="dataExperience" data-experience_id="' + lengthTrExperience + '">'
					+ tdlibelleExperience
					+ tdDateDebutExperience
					+ tdDateFinExperience
					+ '<td><a class="btn btn-danger supprimerExperience" style="cursor: pointer;color: #fff;">supprimer</a></td></tr>';
				$("#tableExperience tbody").append(content);
				lengthTrExperience += 1;
				$("#createExperienceModal").modal('toggle');
			}

			function inAfterSaveDiplome() {
				addDiplome();
			}

			function inAfterSaveExperience() {
				addExperience();
			}

			outAfterSaveDiplome = inAfterSaveDiplome;
			outAfterSaveExperience = inAfterSaveExperience;
		});

	</script>
</body>

</html>