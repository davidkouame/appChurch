description = "Saint Mathieu Layout" ==
<!DOCTYPE html>
<html lang="en">

<head>

	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="description" content="">
	<meta name="author" content="">

	<title>Saint Mathieu</title>

	<!-- Font Awesome Icons -->
	<!--        <link href="{{ 'vendor/fontawesome-free/css/all.min.css'|theme }}" rel="stylesheet" type="text/css">-->

	<!-- Google Fonts -->
	<link href="https://fonts.googleapis.com/css?family=Merriweather+Sans:400,700" rel="stylesheet">
	<link href='https://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic'
		rel='stylesheet' type='text/css'>

	<!-- Plugin CSS -->
	<!--        <link href="{{ 'assets/vendor/magnific-popup/magnific-popup.css'|theme }}" rel="stylesheet">-->

	<!-- Theme CSS - Includes Bootstrap -->

	<!--        <link href="{{ 'assets/css/bootstrap.min.css'|theme }}" rel="stylesheet">-->
	{% partial 'site/meta' %}
	<!--        <link rel="stylesheet" href="{{ 'assets/css/bootstrap.min.css'| theme}}" >-->

	<link href="{{ 'assets/css/creative.min.css'|theme }}" rel="stylesheet">

	<link href="{{ 'assets/node_modules/bootstrap-datepicker/dist/css/bootstrap-datepicker.css'|theme }}"
		rel="stylesheet">

	<style type="text/css">
		button.navbar-toggler.navbar-toggler {
			display: none;
		}
	</style>

</head>

<body id="page-top">

	<div style="max-width: 1403px; margin: 0 auto">
		<!-- Header -->
		{% partial 'site/headernavbar' %}

		<!-- Content -->
		<section class="page-section" id="contact" style="padding-bottom: 60px;">{% page %}</section>

		<!-- Footer -->
		<footer class="bg-light py-5"> {% partial 'site/footer' %} </footer>
	</div>

	<!-- Scripts -->
	{% partial 'site/scriptsnavabar' %}

	<div class="modal fade" id="createDiplomeModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
		aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title">Ajouter un diplôme</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<form action="">
						<div class="form-group">
							<label for="recipient-name" class="col-form-label">Libellé:</label>
							<!-- <input type="text" name="libelle" class="form-control" id="libelleDiplome"> -->
							<select class="form-control" name="libelle" id="libelleDiplome">
								<option value="">Sélectionner un diplôme</option>
								{% for diplome in diplomes %}
									<option value="{{ diplome.id }}">{{ diplome.denomination }}</option>
								{% endfor %}
								<!-- <option value="autre">Autre</option> -->
							</select>
							<input type="text" name="libelle" class="form-control" id="inputAutreDiplome" 
							placeholder="Autre" style="margin-top: 14px;display: none">
						</div>
						<div class="form-group">
							<label for="message-text" class="col-form-label">Date
								début:</label> <input type="date" name="date_debut" class="form-control"
								id="dateDebutDiplome">
						</div>
						<div class="form-group">
							<label for="message-text" class="col-form-label">Date
								fin:</label> <input type="date" name="date_fin" class="form-control"
								id="dateFinDiplome">
						</div>
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-dismiss="modal">Annuler</button>
					<button type="button" class="btn btn-primary" id="saveDiplome">Ajouter</button>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" id="createExperienceModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
		aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title">Ajouter une expérience professionnelle</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<form action="">
						<div class="form-group">
							<label for="recipient-name" class="col-form-label">Libellé:</label>
							<input type="text" name="libelle" class="form-control" id="libelleExperience">
						</div>
						<div class="form-group">
							<label for="message-text" class="col-form-label">Date
								début:</label> <input type="date" name="date_debut" class="form-control"
								id="dateDebutExperience">
						</div>
						<div class="form-group">
							<label for="message-text" class="col-form-label">Date
								fin:</label> <input type="date" name="date_fin" class="form-control"
								id="dateFinExperience">
						</div>
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-dismiss="modal">Annuler</button>
					<button type="button" class="btn btn-primary" id="saveExperience">Ajouter</button>
				</div>
			</div>
		</div>
	</div>

	<script type="text/javascript">
		$(document)
			.ready(
				function () {
					$("html").removeAttr("font-size");
					var $j = jQuery.noConflict();
					var lengthTr = 1;
					var dataTable = null;
					// $j('.datepicker').datepicker({dateFormat: 'yyyy-mm-dd'});

					$("#openModalCreateDiplome").click(function () {
						$("#createDiplomeModal").modal();
					});

					$("#openModalCreateExperience").click(function () {
						$("#createExperienceModal").modal();
					});

					$("#saveDiplome")
						.click(
							function () {
								if (lengthTr == 1) {
									$("#firstTrDiplome")
										.empty();
								}
								// console.log("libelle diplome" +$("#libelleDiplome option:selected").text());
								// return false;
								let tdlibelleDiplome = '<td class="libelleDiplome" data-libellediplome="'
									+ $("#libelleDiplome")
										.val()
									+ '">'
									+ $("#libelleDiplome option:selected").text()
									+ '</td>';
								let tdDateDebutDiplome = '<td class="dateDebutDiplome" data-datedebutdiplome="'
									+ $("#dateDebutDiplome")
										.val()
									+ '">'
									+ $("#dateDebutDiplome")
										.val()
									+ '</td>';
								let tdDateFinDiplome = '<td class="dateFinDiplome" data-datefindiplome="'
									+ $("#dateFinDiplome")
										.val()
									+ '">'
									+ $("#dateFinDiplome")
										.val()
									+ '</td>';
								var content = '<tr scope="row" class="dataDiplome" data-diplome_id="' + lengthTr + '"><th scope="row">1</th>'
									+ tdlibelleDiplome
									+ tdDateDebutDiplome
									+ tdDateFinDiplome
									+ '<td><a class="btn btn-danger supprimerDiplome" href="#">supprimer</a><a class="btn btn-primary modifierDiplome" href="#">edit</a></td></tr>';
								$("#tableDiplome tbody")
									.append(content);
								$("#libelleDiplome").val("");
								$("#dateDebutDiplome").val("");
								$("#dateFinDiplome").val("");
								lengthTr += 1;
								$("#createDiplomeModal").modal(
									'toggle');
							});

					$("#saveExperience")
						.click(
							function () {
								if (lengthTr == 1) {
									$("#firstTrExperience")
										.empty();
								}
								let tdlibelleExperience = '<td class="libelleExperience" data-libelleexperience="'
									+ $(
										"#libelleExperience")
										.val()
									+ '">'
									+ $(
										"#libelleExperience")
										.val()
									+ '</td>';
								let tdDateDebutExperience = '<td class="dateDebutExperience" data-datedebutexperience="'
									+ $(
										"#dateDebutExperience")
										.val()
									+ '">'
									+ $(
										"#dateDebutExperience")
										.val()
									+ '</td>';
								let tdDateFinExperience = '<td class="dateFinExperience" data-datefinexperience="'
									+ $(
										"#dateFinExperience")
										.val()
									+ '">'
									+ $(
										"#dateFinExperience")
										.val()
									+ '</td>';
								var content = '<tr scope="row" class="dataExperience" data-experience_id="' + lengthTr + '"><th scope="row">1</th>'
									+ tdlibelleExperience
									+ tdDateDebutExperience
									+ tdDateFinExperience
									+ '<td><a class="btn btn-danger supprimerExperience" href="#">supprimer</a><a class="btn btn-primary modifierExperience" href="#">edit</a></td></tr>';
								$("#tableExperience tbody")
									.append(content);
								$("#libelleExperience").val("");
								$("#dateDebutExperience").val(
									"");
								$("#dateFinExperience").val("");
								lengthTr += 1;
								$("#createExperienceModal")
									.modal('toggle');

								/*if(lengthTr == 0){
									$("#firstTrExperience").empty();
								}
								var content = '<tr scope="row"><th scope="row">1</th><td>'+
								$("#libelleExperience").val()+'</td><td>'+$("#dateDebutExperience").val()
								+'</td><td>'+$("#dateFinExperience").val()+'</td><td><a class="btn btn-danger supprimerExperience" href="#">supprimer</a><a class="btn btn-primary modifierExperience" href="#">edit</a></td></tr>';
								$("#tableExperience tbody").append(content);
								$("#libelleExperience").val("");
								$("#dateDebutExperience").val("");
								$("#dateFinExperience").val("");
								lengthTr+=1;
								$("#createExperienceModal").modal('toggle');*/
							});

					$(".supprimerDiplome").click(function () {

					});

					$(".modifierDiplome").click(function () {

					});

					$("#saveParoissien")
						.submit(
							function () {
								// let datasDiplomes = [];
								let countDiplome = 0;
								// let datasExperiences = [];
								let countExperience = 0;
								$(".dataDiplome")
									.each(
										function (e) {
											let dataDiplome = $(this);
											let libelleDiplome = dataDiplome
												.find(
													'.libelleDiplome')
												.data(
													'libellediplome');
											let dateDebutDiplome = dataDiplome
												.find(
													'.dateDebutDiplome')
												.data(
													'datedebutdiplome');
											let dateFinDiplome = dataDiplome
												.find(
													'.dateFinDiplome')
												.data(
													'datefindiplome');
											/*datasDiplomes
												.push([
													libelleDiplome,
													dateDebutDiplome,
													dateFinDiplome]);*/
											let content = '<input type="text" name="diplomes[' + countDiplome + '][libelle]" value="' + libelleDiplome + '" hidden>';
											content += '<input type="text" name="diplomes[' + countDiplome + '][date_debut]" value="' + dateDebutDiplome + '" hidden>';
											content += '<input type="text" name="diplomes[' + countDiplome + '][date_fin]" value="' + dateFinDiplome + '" hidden>';
											countDiplome += 1;
											$(
												"#saveParoissien")
												.append(
													content);
										});
								
								$(".dataExperience")
								.each(
									function (e) {
										let dataExperience = $(this);
										let libelleExperience = dataExperience
											.find(
												'.libelleExperience')
											.data(
												'libelleexperience');
										let dateDebutExperience = dataExperience
											.find(
												'.dateDebutExperience')
											.data(
												'datedebutexperience');
										let dateFinExperience = dataExperience
											.find(
												'.dateFinExperience')
											.data(
												'datefinexperience');
										/*datasDiplomes
											.push([
												libelleExperience,
												dateDebutExperience,
												dateFinExperience]);*/
										let content = '<input type="text" name="experiences[' + countExperience + '][libelle]" value="' + libelleExperience + '" hidden>';
										content += '<input type="text" name="experiences[' + countExperience + '][date_debut]" value="' + dateDebutExperience + '" hidden>';
										content += '<input type="text" name="experiences[' + countExperience + '][date_fin]" value="' + dateFinExperience + '" hidden>';
										countExperience += 1;
										$(
											"#saveParoissien")
											.append(
												content);
									});
								return true;
							});
					
					/*$("#selectDiplome").change(function(e){
						if($(this).val() == "autre"){
							$("#inputAutreDiplome").show();
						}else{
							$("#inputAutreDiplome").hide();
						}
					});*/
				});
	</script>
</body>

</html>